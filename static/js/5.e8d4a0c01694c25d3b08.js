webpackJsonp([5],{"4U9m":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("bm-overlay",{ref:"customOverlay",class:{sample:!0,active:this.active},attrs:{pane:"labelPane"},on:{draw:this.draw}},[e("div",{staticClass:"div",on:{click:this.test}})])},staticRenderFns:[]};var i=s("C7Lr")({name:"storeIcon",props:["text","position","active"],watch:{position:{handler:function(){this.$refs.customOverlay.reload()},deep:!0}},methods:{test:function(){},draw:function(t){var e=t.el,s=t.BMap,a=t.map,i=this.position,o=i.lng,n=i.lat,r=a.pointToOverlayPixel(new s.Point(o,n));e.style.left=r.x-18+"px",e.style.top=r.y-18+"px"}}},a,!1,function(t){s("FKLE")},"data-v-09ba3a01",null).exports,o={name:"maps",props:["points"],data:function(){return{active:!1,center:{lng:0,lat:0},zoom:3,dotPosition:{}}},components:{storeIcon:i},methods:{},mounted:function(){navigator.geolocation.getCurrentPosition(function(t){this.center.lat=t.coords.latitude,this.center.lng=t.coords.longitude,console.log("经度："+t.coords.longitude+"纬度："+t.coords.latitude)})}},n={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var r=s("C7Lr")(o,n,!1,function(t){s("98x0")},"data-v-02e025b3",null).exports,h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"main"},[s("div",{staticClass:"fl vux-1px-r",on:{click:function(e){return t.$router.go(-1)}}},[s("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fr"},[e("p",[e("span",{staticClass:"iconfont"},[this._v("")]),this._v("\n        商品/服务/商家\n      ")])])}]};var c=s("C7Lr")({name:"headerSearch",methods:{}},h,!1,function(t){s("v0ty")},"data-v-0680d132",null).exports,d=s("8Igq"),l=(d.a,{name:"mapsBottom",data:function(){return{mainHeight:"2.2rem",maskHeight:"0.88rem",showGlobeHeader:!1,showHeader:!0,showMore:!1,showMask:!0,startPageY:0}},components:{goodsListSelect:d.a},methods:{backDefault:function(){this.mainHeight="2.2rem",this.showHeader=!0,this.showMask=!0,this.showGlobeHeader=!1,this.$emit("hiddenSearch",!0)},more:function(){this.mainHeight="6.2rem",this.showHeader=!1,this.showMore=!0},touchmove:function(t){var e=this;this.startPageY>t.changedTouches[0].pageY?this.startPageY>400?(this.mainHeight="6.6rem",this.showHeader=!1,this.showMore=!0):(this.mainHeight="calc(100vh - 0.9rem - 46px)",this.$emit("hiddenSearch",!1),this.showMore=!1,this.showMask=!1,this.showGlobeHeader=!0):this.startPageY<250?(this.mainHeight="6.6rem",this.$emit("hiddenSearch",!0)):(this.mainHeight="2.2rem",this.showMore=!1,setTimeout(function(){e.showHeader=!0},300))},touchstart:function(t){this.startPageY=t.changedTouches[0].pageY}}}),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showGlobeHeader,expression:"showGlobeHeader"}],staticClass:"vux-1px-b"},[s("x-header",{attrs:{"left-options":{backText:"",preventGoBack:!0}},on:{"on-click-back":t.backDefault}},[t._v("\n      当前范围门店\n      "),s("div",{attrs:{slot:"right"},slot:"right"},[s("span",{staticClass:"iconfont",staticStyle:{"font-size":".36rem"}},[t._v("")])])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showGlobeHeader,expression:"showGlobeHeader"}],staticClass:"select"},[s("goodsListSelect")],1),t._v(" "),s("div",{staticClass:"main"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showHeader,expression:"showHeader"}],staticClass:"header",on:{click:t.more}},[t._v("\n      展开更多商家\n      "),s("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"header2",on:{click:t.more}},[t._v("当前范围门店")]),t._v(" "),s("div",{staticClass:"items",style:{height:t.mainHeight}},t._l(30,function(e,a){return s("div",{key:a,staticClass:"test"},[t._v("1")])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"mask",style:{height:t.maskHeight},on:{touchmove:t.touchmove,touchstart:t.touchstart}})])])},staticRenderFns:[]};var u=s("C7Lr")(l,v,!1,function(t){s("B/ui")},"data-v-0efacc0d",null).exports,m={name:"storeMaps",data:function(){return{points:[],showSearch:!0}},components:{maps:r,headerSearch:c,mapsBottom:u},methods:{hiddenSearch:function(t){this.showSearch=t},getStoreList:function(){var t=this;this.$axios.post("app/shopc/shopList?page=1&limit=40&lon=120.151359&lat=35.948063").then(function(e){var s=e.data.shopInfoList;for(var a in s)t.points.push({lng:t.TO.BLNG(s[a].addressLon),lat:t.TO.BLAT(s[a].addressLat)})})}},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.getStoreList()},1e3)})}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.showSearch,expression:"showSearch"}],staticClass:"search"},[e("headerSearch")],1),this._v(" "),e("div",{staticClass:"maps"},[e("maps",{attrs:{points:this.points}})],1),this._v(" "),e("div",{staticClass:"bottom"},[e("mapsBottom",{on:{hiddenSearch:this.hiddenSearch}})],1)])},staticRenderFns:[]};var f=s("C7Lr")(m,p,!1,function(t){s("rSN+")},"data-v-35abb1ba",null);e.default=f.exports},"98x0":function(t,e){},"B/ui":function(t,e){},FKLE:function(t,e){},"rSN+":function(t,e){},v0ty:function(t,e){}});